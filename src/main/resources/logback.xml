<?xml version="1.0" encoding="UTF-8" ?>

<!-- ==================================================================== -->
<!-- This config file is intended to be used by a SocketServer that logs -->
<!-- events received from various clients on the console and to a file -->
<!-- that is rolled over when appropriate. The interesting point to note -->
<!-- is that it is a configuration file like any other. -->
<!-- ==================================================================== -->

<configuration>

	<appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
		<encoder charset="UTF-8">
			<pattern>{"@timestamp":"%date","level":"%-5level",%message,"logger":"%logger:%L","thread":"[%thread]"}%n</pattern>
		</encoder>
		<filter class="ch.qos.logback.classic.filter.LevelFilter">
			<level>DEBUG</level>
			<onMatch>DENY</onMatch>
			<onMismatch>ACCEPT</onMismatch>
		</filter>
	</appender>

	<appender name="DEBUG" class="ch.qos.logback.core.rolling.RollingFileAppender">
		<file>@log.file@debug.log</file>
		<encoder>
			<pattern>{"@timestamp":"%date","level":"%-5level",%message,"logger":"%logger:%L","thread":"[%thread]"}%n</pattern>
			<charset class="java.nio.charset.Charset">UTF-8</charset>
		</encoder>
		<rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
			<fileNamePattern>@log.file@debug.log_%d{yyyyMMdd}</fileNamePattern>
		</rollingPolicy>
		<filter class="ch.qos.logback.classic.filter.LevelFilter">
			<level>DEBUG</level>
			<onMatch>ACCEPT</onMatch>
			<onMismatch>DENY</onMismatch>
		</filter>
	</appender>

	<appender name="INFO" class="ch.qos.logback.core.rolling.RollingFileAppender">
		<file>@log.file@info.log</file>
		<encoder>
			<pattern>{"@timestamp":"%date","level":"%-5level",%message,"logger":"%logger:%L","thread":"[%thread]"}%n</pattern>
			<charset class="java.nio.charset.Charset">UTF-8</charset>
		</encoder>
		<rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
			<fileNamePattern>@log.file@info.log_%d{yyyyMMdd}</fileNamePattern>
		</rollingPolicy>
		<filter class="ch.qos.logback.classic.filter.LevelFilter">
			<level>INFO</level>
			<onMatch>ACCEPT</onMatch>
			<onMismatch>DENY</onMismatch>
		</filter>
	</appender>

	<appender name="ERROR" class="ch.qos.logback.core.rolling.RollingFileAppender">
		<file>@log.file@error.log</file>
		<encoder>
			<pattern>{"@timestamp":"%date","level":"%-5level",%message,"logger":"%logger:%L","thread":"[%thread]"}%n</pattern>
			<charset class="java.nio.charset.Charset">UTF-8</charset>
		</encoder>
		<rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
			<fileNamePattern>@log.file@error.log_%d{yyyyMMdd}</fileNamePattern>
		</rollingPolicy>
		<filter class="ch.qos.logback.classic.filter.LevelFilter">
			<level>ERROR</level>
			<onMatch>ACCEPT</onMatch>
			<onMismatch>DENY</onMismatch>
		</filter>
	</appender>

	<appender name="MONITOR" class="ch.qos.logback.core.rolling.RollingFileAppender">
		<file>@log.file@monitor.log</file>
		<encoder>
			<pattern>{"@timestamp":"%date",%message}%n</pattern>
			<charset class="java.nio.charset.Charset">UTF-8</charset>
		</encoder>
		<rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
			<fileNamePattern>@log.file@monitor.log_%d{yyyyMMdd}</fileNamePattern>
		</rollingPolicy>
	</appender>

	<root>
		<level value="INFO" />
		<appender-ref ref="CONSOLE" />
		<appender-ref ref="DEBUG" />
		<appender-ref ref="INFO" />
		<appender-ref ref="ERROR" />
	</root>

	<logger name="org.springframework.amqp" level="INFO"/>
	<logger name="com.caucho.hessian.server" level="DEBUG" additivity="false">
		<appender-ref ref="MONITOR"/>
	</logger>
	<logger name="cn.facebank.common.preffilter" level="DEBUG" additivity="false">
		<appender-ref ref="MONITOR"/>
	</logger>
</configuration>